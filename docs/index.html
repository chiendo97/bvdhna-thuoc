<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hướng dẫn hiệu chỉnh liều kháng sinh</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f5f5f5;
        }

        .header {
            padding: 0.75rem 1rem;
            background: #2e7d32;
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: wrap;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .search-input {
            flex: 1;
            min-width: 150px;
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
            border: none;
            border-radius: 4px;
            background: rgba(255,255,255,0.9);
            color: #333;
            outline: none;
        }

        .search-input::placeholder {
            color: #666;
        }

        .search-input:focus {
            background: white;
            box-shadow: 0 0 0 2px rgba(255,255,255,0.5);
        }

        .drug-select {
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
            min-width: 200px;
            border: none;
            border-radius: 4px;
            background: rgba(255,255,255,0.9);
            color: #333;
            cursor: pointer;
        }

        .nav-buttons {
            display: flex;
            gap: 0.25rem;
        }

        .nav-btn {
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
            border: none;
            border-radius: 4px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: background 0.2s;
        }

        .nav-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .entry-info {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.9);
            white-space: nowrap;
        }

        .viewer {
            flex: 1;
            overflow: auto;
            background: #f5f5f5;
        }

        .viewer iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .loading, .no-results, .error {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 1.1rem;
            color: #666;
        }

        .error {
            color: #c62828;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .header {
                padding: 0.5rem;
                gap: 0.5rem;
            }

            .search-input {
                min-width: 120px;
                font-size: 0.85rem;
                padding: 0.4rem 0.6rem;
            }

            .drug-select {
                min-width: 150px;
                font-size: 0.85rem;
                padding: 0.4rem 0.6rem;
            }

            .nav-btn {
                padding: 0.4rem 0.6rem;
                font-size: 0.85rem;
            }

            .entry-info {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input, .drug-select {
                width: 100%;
                min-width: unset;
            }

            .nav-buttons {
                justify-content: center;
            }

            .entry-info {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <input type="text" class="search-input" id="search" placeholder="Tìm kiếm thuốc...">
        <select class="drug-select" id="drugSelect">
            <option value="0" data-name="acyclovir">Acyclovir</option>
            <option value="1" data-name="amikacin">Amikacin</option>
            <option value="2" data-name="amoxicillin">Amoxicillin</option>
            <option value="3" data-name="anidulafungin">Anidulafungin</option>
            <option value="4" data-name="azithromycin">Azithromycin</option>
            <option value="5" data-name="caspofungin">Caspofungin</option>
            <option value="6" data-name="cefaclor">Cefaclor</option>
            <option value="7" data-name="cefalexin">Cefalexin</option>
            <option value="8" data-name="cefamandol">Cefamandol</option>
            <option value="9" data-name="cefazolin">Cefazolin</option>
            <option value="10" data-name="cefdinir">Cefdinir</option>
            <option value="11" data-name="cefepim">Cefepim</option>
            <option value="12" data-name="cefixim">Cefixim</option>
            <option value="13" data-name="cefoperazon">Cefoperazon</option>
            <option value="14" data-name="cefoperazon + sulbactam">Cefoperazon + sulbactam</option>
            <option value="15" data-name="cefotaxim">Cefotaxim</option>
            <option value="16" data-name="cefotiam">Cefotiam</option>
            <option value="17" data-name="cefpirom">Cefpirom</option>
            <option value="18" data-name="ceftazidim">Ceftazidim</option>
            <option value="19" data-name="ceftazidim + avibactam">Ceftazidim + avibactam</option>
            <option value="20" data-name="ceftibuten">Ceftibuten</option>
            <option value="21" data-name="ceftizoxim">Ceftizoxim</option>
            <option value="22" data-name="ceftolozan + tazobactam">Ceftolozan + tazobactam</option>
            <option value="23" data-name="ceftriaxon">Ceftriaxon</option>
            <option value="24" data-name="cefuroxim">Cefuroxim</option>
            <option value="25" data-name="ciprofloxacin">Ciprofloxacin</option>
            <option value="26" data-name="clarithromycin">Clarithromycin</option>
            <option value="27" data-name="clindamycin">Clindamycin</option>
            <option value="28" data-name="doripenem">Doripenem</option>
            <option value="29" data-name="doxycyclin">Doxycyclin</option>
            <option value="30" data-name="ertapenem">Ertapenem</option>
            <option value="31" data-name="fluconazol">Fluconazol</option>
            <option value="32" data-name="fosfomycin">Fosfomycin</option>
            <option value="33" data-name="gentamicin">Gentamicin</option>
            <option value="34" data-name="imipenem + cilastatin">Imipenem + cilastatin</option>
            <option value="35" data-name="itraconazol">Itraconazol</option>
            <option value="36" data-name="levofloxacin">Levofloxacin</option>
            <option value="37" data-name="linezolid">Linezolid</option>
            <option value="38" data-name="meropenem">Meropenem</option>
            <option value="39" data-name="metronidazol">Metronidazol</option>
            <option value="40" data-name="moxifloxacin">Moxifloxacin</option>
            <option value="41" data-name="ofloxacin">Ofloxacin</option>
            <option value="42" data-name="piperacilin + tazobactam">Piperacilin + tazobactam</option>
            <option value="43" data-name="co-trimoxazol">Co-trimoxazol</option>
            <option value="44" data-name="ticarcilin + acid clavulanic">Ticarcilin + acid clavulanic</option>
            <option value="45" data-name="tinidazol">Tinidazol</option>
            <option value="46" data-name="tobramycin">Tobramycin</option>
            <option value="47" data-name="vancomycin">Vancomycin</option>
            <option value="48" data-name="voriconazol">Voriconazol</option>
            <option value="49" data-name="colistin">Colistin</option>
        </select>
        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" title="Trước">&larr;</button>
            <button class="nav-btn" id="nextBtn" title="Sau">&rarr;</button>
        </div>
        <span class="entry-info" id="entryInfo"></span>
    </div>
    <div class="viewer" id="viewerContainer">
        <div class="loading">Đang tải...</div>
    </div>

    <script>
        const search = document.getElementById('search');
        const drugSelect = document.getElementById('drugSelect');
        const viewerContainer = document.getElementById('viewerContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const entryInfo = document.getElementById('entryInfo');

        // Embedded entries data
        const allEntries = [
  {
    "name": "Acyclovir",
    "file": "Acyclovir.html"
  },
  {
    "name": "Amikacin",
    "file": "Amikacin.html"
  },
  {
    "name": "Amoxicillin",
    "file": "Amoxicillin.html"
  },
  {
    "name": "Anidulafungin",
    "file": "Anidulafungin.html"
  },
  {
    "name": "Azithromycin",
    "file": "Azithromycin.html"
  },
  {
    "name": "Caspofungin",
    "file": "Caspofungin.html"
  },
  {
    "name": "Cefaclor",
    "file": "Cefaclor.html"
  },
  {
    "name": "Cefalexin",
    "file": "Cefalexin.html"
  },
  {
    "name": "Cefamandol",
    "file": "Cefamandol.html"
  },
  {
    "name": "Cefazolin",
    "file": "Cefazolin.html"
  },
  {
    "name": "Cefdinir",
    "file": "Cefdinir.html"
  },
  {
    "name": "Cefepim",
    "file": "Cefepim.html"
  },
  {
    "name": "Cefixim",
    "file": "Cefixim.html"
  },
  {
    "name": "Cefoperazon",
    "file": "Cefoperazon.html"
  },
  {
    "name": "Cefoperazon + sulbactam",
    "file": "Cefoperazon_+_sulbactam.html"
  },
  {
    "name": "Cefotaxim",
    "file": "Cefotaxim.html"
  },
  {
    "name": "Cefotiam",
    "file": "Cefotiam.html"
  },
  {
    "name": "Cefpirom",
    "file": "Cefpirom.html"
  },
  {
    "name": "Ceftazidim",
    "file": "Ceftazidim.html"
  },
  {
    "name": "Ceftazidim + avibactam",
    "file": "Ceftazidim_+_avibactam.html"
  },
  {
    "name": "Ceftibuten",
    "file": "Ceftibuten.html"
  },
  {
    "name": "Ceftizoxim",
    "file": "Ceftizoxim.html"
  },
  {
    "name": "Ceftolozan + tazobactam",
    "file": "Ceftolozan_+_tazobactam.html"
  },
  {
    "name": "Ceftriaxon",
    "file": "Ceftriaxon.html"
  },
  {
    "name": "Cefuroxim",
    "file": "Cefuroxim.html"
  },
  {
    "name": "Ciprofloxacin",
    "file": "Ciprofloxacin.html"
  },
  {
    "name": "Clarithromycin",
    "file": "Clarithromycin.html"
  },
  {
    "name": "Clindamycin",
    "file": "Clindamycin.html"
  },
  {
    "name": "Doripenem",
    "file": "Doripenem.html"
  },
  {
    "name": "Doxycyclin",
    "file": "Doxycyclin.html"
  },
  {
    "name": "Ertapenem",
    "file": "Ertapenem.html"
  },
  {
    "name": "Fluconazol",
    "file": "Fluconazol.html"
  },
  {
    "name": "Fosfomycin",
    "file": "Fosfomycin.html"
  },
  {
    "name": "Gentamicin",
    "file": "Gentamicin.html"
  },
  {
    "name": "Imipenem + cilastatin",
    "file": "Imipenem_+_cilastatin.html"
  },
  {
    "name": "Itraconazol",
    "file": "Itraconazol.html"
  },
  {
    "name": "Levofloxacin",
    "file": "Levofloxacin.html"
  },
  {
    "name": "Linezolid",
    "file": "Linezolid.html"
  },
  {
    "name": "Meropenem",
    "file": "Meropenem.html"
  },
  {
    "name": "Metronidazol",
    "file": "Metronidazol.html"
  },
  {
    "name": "Moxifloxacin",
    "file": "Moxifloxacin.html"
  },
  {
    "name": "Ofloxacin",
    "file": "Ofloxacin.html"
  },
  {
    "name": "Piperacilin + tazobactam",
    "file": "Piperacilin_+_tazobactam.html"
  },
  {
    "name": "Co-trimoxazol",
    "file": "Co-trimoxazol.html"
  },
  {
    "name": "Ticarcilin + acid clavulanic",
    "file": "Ticarcilin_+_acid_clavulanic.html"
  },
  {
    "name": "Tinidazol",
    "file": "Tinidazol.html"
  },
  {
    "name": "Tobramycin",
    "file": "Tobramycin.html"
  },
  {
    "name": "Vancomycin",
    "file": "Vancomycin.html"
  },
  {
    "name": "Voriconazol",
    "file": "Voriconazol.html"
  },
  {
    "name": "Colistin",
    "file": "Colistin.html"
  }
];

        let currentEntries = [...allEntries];

        function updateEntryInfo() {
            const currentIndex = drugSelect.selectedIndex;
            const total = drugSelect.options.length;
            if (total > 0) {
                entryInfo.textContent = `${currentIndex + 1} / ${total}`;
            } else {
                entryInfo.textContent = '';
            }
            prevBtn.disabled = currentIndex <= 0;
            nextBtn.disabled = currentIndex >= total - 1;
        }

        function updateViewer() {
            const selectedIdx = drugSelect.selectedIndex;
            if (selectedIdx < 0 || currentEntries.length === 0) {
                viewerContainer.innerHTML = '<div class="no-results">Không tìm thấy kết quả</div>';
                updateEntryInfo();
                return;
            }

            const entry = currentEntries[selectedIdx];
            const iframe = document.createElement('iframe');
            iframe.src = 'drugs/' + entry.file;
            iframe.title = entry.name;

            viewerContainer.innerHTML = '';
            viewerContainer.appendChild(iframe);

            updateEntryInfo();
        }

        drugSelect.addEventListener('change', updateViewer);

        prevBtn.addEventListener('click', () => {
            if (drugSelect.selectedIndex > 0) {
                drugSelect.selectedIndex--;
                updateViewer();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (drugSelect.selectedIndex < drugSelect.options.length - 1) {
                drugSelect.selectedIndex++;
                updateViewer();
            }
        });

        // Debounce function for search
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        const handleSearch = debounce(() => {
            const query = search.value.toLowerCase().trim();

            // Filter entries
            currentEntries = allEntries.filter(entry => entry.name.toLowerCase().includes(query));

            // Rebuild select
            drugSelect.innerHTML = '';
            currentEntries.forEach((entry, idx) => {
                const option = document.createElement('option');
                option.value = idx;
                option.dataset.name = entry.name.toLowerCase();
                option.textContent = entry.name;
                drugSelect.appendChild(option);
            });

            updateViewer();
        }, 150);

        search.addEventListener('input', handleSearch);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.target === search) return;

            if (e.key === 'ArrowLeft') {
                prevBtn.click();
            } else if (e.key === 'ArrowRight') {
                nextBtn.click();
            }
        });

        // Initialize
        updateViewer();
    </script>
</body>
</html>