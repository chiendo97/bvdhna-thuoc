<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f0f0f0;
        }

        .header {
            padding: 1rem;
            background: #ffffff;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 1rem;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-input {
            flex: 1;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 6px;
            outline: none;
            transition: border-color 0.2s;
        }

        .search-input:focus {
            border-color: #0066cc;
        }

        .page-select {
            padding: 0.75rem 1rem;
            font-size: 1rem;
            min-width: 250px;
            border: 1px solid #ccc;
            border-radius: 6px;
            background: white;
            cursor: pointer;
        }

        .nav-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .nav-btn {
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: background 0.2s;
        }

        .nav-btn:hover {
            background: #f5f5f5;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-info {
            font-size: 0.9rem;
            color: #666;
            white-space: nowrap;
        }

        .viewer {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
            padding: 4px;
            background: #333;
            overflow-y: auto;
        }

        .viewer.single-page embed {
            width: 100%;
            height: 100%;
            min-height: 100%;
            border: none;
        }

        .viewer.dual-page embed {
            width: 100%;
            height: 100vh;
            min-height: 100vh;
            border: none;
            flex-shrink: 0;
        }

        .no-results {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 1.2rem;
            background: #333;
        }
    </style>
</head>
<body>
    <div class="header">
        <input type="text" class="search-input" id="search" placeholder="Search by name...">
        <select class="page-select" id="pageSelect">
            <option value="0" data-name="acyclovir">Acyclovir (1, 2)</option>
            <option value="1" data-name="page 1">Page 1 (1)</option>
            <option value="2" data-name="page 2">Page 2 (2)</option>
            <option value="3" data-name="page 3">Page 3 (3)</option>
            <option value="4" data-name="page 4">Page 4 (4)</option>
            <option value="5" data-name="page 5">Page 5 (5)</option>
            <option value="6" data-name="page 6">Page 6 (6)</option>
            <option value="7" data-name="page 7">Page 7 (7)</option>
            <option value="8" data-name="page 8">Page 8 (8)</option>
            <option value="9" data-name="page 9">Page 9 (9)</option>
            <option value="10" data-name="page 10">Page 10 (10)</option>
            <option value="11" data-name="page 11">Page 11 (11)</option>
            <option value="12" data-name="page 12">Page 12 (12)</option>
            <option value="13" data-name="page 13">Page 13 (13)</option>
            <option value="14" data-name="page 14">Page 14 (14)</option>
            <option value="15" data-name="page 15">Page 15 (15)</option>
            <option value="16" data-name="page 16">Page 16 (16)</option>
            <option value="17" data-name="page 17">Page 17 (17)</option>
            <option value="18" data-name="page 18">Page 18 (18)</option>
            <option value="19" data-name="page 19">Page 19 (19)</option>
            <option value="20" data-name="page 20">Page 20 (20)</option>
            <option value="21" data-name="page 21">Page 21 (21)</option>
            <option value="22" data-name="page 22">Page 22 (22)</option>
            <option value="23" data-name="page 23">Page 23 (23)</option>
            <option value="24" data-name="page 24">Page 24 (24)</option>
            <option value="25" data-name="page 25">Page 25 (25)</option>
        </select>
        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" title="Previous">&larr; Prev</button>
            <button class="nav-btn" id="nextBtn" title="Next">Next &rarr;</button>
        </div>
        <span class="page-info" id="pageInfo"></span>
    </div>
    <div class="viewer single-page" id="viewerContainer">
        <embed src="pages/page_1.pdf" type="application/pdf">
    </div>

    <script>
        const search = document.getElementById('search');
        const pageSelect = document.getElementById('pageSelect');
        const viewerContainer = document.getElementById('viewerContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageInfo = document.getElementById('pageInfo');

        // Embedded entries data
        const allEntries = [
  {
    "name": "Acyclovir",
    "pages": [
      1,
      2
    ],
    "files": [
      "page_1.pdf",
      "page_2.pdf"
    ]
  },
  {
    "name": "Page 1",
    "pages": [
      1
    ],
    "files": [
      "page_1.pdf"
    ]
  },
  {
    "name": "Page 2",
    "pages": [
      2
    ],
    "files": [
      "page_2.pdf"
    ]
  },
  {
    "name": "Page 3",
    "pages": [
      3
    ],
    "files": [
      "page_3.pdf"
    ]
  },
  {
    "name": "Page 4",
    "pages": [
      4
    ],
    "files": [
      "page_4.pdf"
    ]
  },
  {
    "name": "Page 5",
    "pages": [
      5
    ],
    "files": [
      "page_5.pdf"
    ]
  },
  {
    "name": "Page 6",
    "pages": [
      6
    ],
    "files": [
      "page_6.pdf"
    ]
  },
  {
    "name": "Page 7",
    "pages": [
      7
    ],
    "files": [
      "page_7.pdf"
    ]
  },
  {
    "name": "Page 8",
    "pages": [
      8
    ],
    "files": [
      "page_8.pdf"
    ]
  },
  {
    "name": "Page 9",
    "pages": [
      9
    ],
    "files": [
      "page_9.pdf"
    ]
  },
  {
    "name": "Page 10",
    "pages": [
      10
    ],
    "files": [
      "page_10.pdf"
    ]
  },
  {
    "name": "Page 11",
    "pages": [
      11
    ],
    "files": [
      "page_11.pdf"
    ]
  },
  {
    "name": "Page 12",
    "pages": [
      12
    ],
    "files": [
      "page_12.pdf"
    ]
  },
  {
    "name": "Page 13",
    "pages": [
      13
    ],
    "files": [
      "page_13.pdf"
    ]
  },
  {
    "name": "Page 14",
    "pages": [
      14
    ],
    "files": [
      "page_14.pdf"
    ]
  },
  {
    "name": "Page 15",
    "pages": [
      15
    ],
    "files": [
      "page_15.pdf"
    ]
  },
  {
    "name": "Page 16",
    "pages": [
      16
    ],
    "files": [
      "page_16.pdf"
    ]
  },
  {
    "name": "Page 17",
    "pages": [
      17
    ],
    "files": [
      "page_17.pdf"
    ]
  },
  {
    "name": "Page 18",
    "pages": [
      18
    ],
    "files": [
      "page_18.pdf"
    ]
  },
  {
    "name": "Page 19",
    "pages": [
      19
    ],
    "files": [
      "page_19.pdf"
    ]
  },
  {
    "name": "Page 20",
    "pages": [
      20
    ],
    "files": [
      "page_20.pdf"
    ]
  },
  {
    "name": "Page 21",
    "pages": [
      21
    ],
    "files": [
      "page_21.pdf"
    ]
  },
  {
    "name": "Page 22",
    "pages": [
      22
    ],
    "files": [
      "page_22.pdf"
    ]
  },
  {
    "name": "Page 23",
    "pages": [
      23
    ],
    "files": [
      "page_23.pdf"
    ]
  },
  {
    "name": "Page 24",
    "pages": [
      24
    ],
    "files": [
      "page_24.pdf"
    ]
  },
  {
    "name": "Page 25",
    "pages": [
      25
    ],
    "files": [
      "page_25.pdf"
    ]
  }
];

        let currentEntries = [...allEntries];

        function updatePageInfo() {
            const currentIndex = pageSelect.selectedIndex;
            const total = pageSelect.options.length;
            if (total > 0) {
                pageInfo.textContent = `Entry ${currentIndex + 1} of ${total}`;
            } else {
                pageInfo.textContent = '';
            }
            prevBtn.disabled = currentIndex <= 0;
            nextBtn.disabled = currentIndex >= total - 1;
        }

        function updateViewer() {
            const selectedIdx = pageSelect.selectedIndex;
            if (selectedIdx < 0 || currentEntries.length === 0) {
                viewerContainer.innerHTML = '<div class="no-results">No matching entries found</div>';
                viewerContainer.className = 'viewer';
                updatePageInfo();
                return;
            }

            const entry = currentEntries[selectedIdx];
            viewerContainer.innerHTML = '';

            // Set class based on page count
            viewerContainer.className = entry.files.length === 1 ? 'viewer single-page' : 'viewer dual-page';

            // Create embed for each page
            entry.files.forEach(file => {
                const embed = document.createElement('embed');
                embed.src = 'pages/' + file;
                embed.type = 'application/pdf';
                viewerContainer.appendChild(embed);
            });

            updatePageInfo();
        }

        pageSelect.addEventListener('change', updateViewer);

        prevBtn.addEventListener('click', () => {
            if (pageSelect.selectedIndex > 0) {
                pageSelect.selectedIndex--;
                updateViewer();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (pageSelect.selectedIndex < pageSelect.options.length - 1) {
                pageSelect.selectedIndex++;
                updateViewer();
            }
        });

        // Debounce function for search
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        const handleSearch = debounce(() => {
            const query = search.value.toLowerCase().trim();

            // Filter entries
            currentEntries = allEntries.filter(entry => entry.name.toLowerCase().includes(query));

            // Rebuild select
            pageSelect.innerHTML = '';
            currentEntries.forEach((entry, idx) => {
                const option = document.createElement('option');
                option.value = idx;
                option.dataset.name = entry.name.toLowerCase();
                option.textContent = `${entry.name} (${entry.pages.join(', ')})`;
                pageSelect.appendChild(option);
            });

            updateViewer();
        }, 150);

        search.addEventListener('input', handleSearch);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.target === search) return; // Don't interfere with search input

            if (e.key === 'ArrowLeft') {
                prevBtn.click();
            } else if (e.key === 'ArrowRight') {
                nextBtn.click();
            }
        });

        // Initialize
        updatePageInfo();
    </script>
</body>
</html>